<div class="flex">
  <p-menubar [model]="items" class="flex-grow-1 mb-2" style="height: 5rem">
    <ng-template pTemplate="start">
      <img src="assets/logos/unification.svg" style="height: 2rem">
    </ng-template>

    <ng-template pTemplate="end">
      Selected Network:
      <p-dropdown
        [options]="availableNetworks"
        optionLabel="chainName"
        (onChange)="onChangeNetwork($event)"
      >
      </p-dropdown>
    </ng-template>

  </p-menubar>
</div>

<p-table [value]="proposals" [tableStyle]="{'min-width': '50rem'}">
  <ng-template pTemplate="header">
    <tr>
      <th>ID</th>
      <th>Submit Date</th>
      <th>Type</th>
      <th>Title</th>
      <th>Status</th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-prop>
    <tr>
      <td><a [routerLink]="'details/' + prop.proposal_id">{{prop.proposal_id}}</a></td>
      <td>{{prop.submit_time | date: 'yyyy-MM-dd HH:mm Z'}}</td>
      <td>{{Translator.proposalType[prop.content['@type']]}}</td>
      <td>{{prop.content.title}}</td>
      <td>
        <p-tag
          *ngIf="prop.status === 'PROPOSAL_STATUS_PASSED'"
          severity="success"
          [value]="Translator.proposalStatus[prop.status]"
          [rounded]="true"></p-tag>

        <p-tag
          *ngIf="prop.status === 'PROPOSAL_STATUS_REJECTED'"
          severity="danger"
          [value]="Translator.proposalStatus[prop.status]"
          [rounded]="true"></p-tag>

        <p-tag
          *ngIf="prop.status === 'PROPOSAL_STATUS_DEPOSIT_PERIOD'"
          severity="warning"
          [value]="Translator.proposalStatus[prop.status]"
          [rounded]="true"></p-tag>

      </td>
      <td>
        <button *ngIf="prop.status === 'PROPOSAL_STATUS_DEPOSIT_PERIOD'" type="button" pButton label="Deposit FUND" (click)="onClickDeposit(prop)"></button>
<!--        <button type="button" pButton label="Vote" (click)="onClickVote(prop)"></button>-->
<!--        <p-splitButton label="Click for Vote" [model]="this.voteItems" styleClass="p-button-rounded mr-2 mb-2"></p-splitButton>-->

      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog
  header="Submit new Proposal"
  [(visible)]="submitProposalDialogVisible"
  [modal]="true">
  <app-new-proposal></app-new-proposal>
</p-dialog>

<p-dialog header="Deposit to Proposal" [(visible)]="depositDialogVisible">
  <app-deposit [proposal]="selectedProposal" (result)="onResult($event)"></app-deposit>
</p-dialog>

<p-dialog header="Vote on a Proposal" [(visible)]="voteDialogVisible">

  <ng-template pTemplate="footer">
    <button type="button" pButton label="YES" (click)="vote(VoteOption.VOTE_OPTION_YES)"></button>
    <button type="button" pButton label="NO" (click)="vote(VoteOption.VOTE_OPTION_NO)"></button>
    <button type="button" pButton label="ABSTAIN" (click)="vote(VoteOption.VOTE_OPTION_ABSTAIN)"></button>
    <button type="button" pButton label="NO WITH VETO" (click)="vote(VoteOption.VOTE_OPTION_NO_WITH_VETO)"></button>
  </ng-template>
</p-dialog>
